{"version":3,"file":"component---src-pages-guides-remote-control-md-ddc62a18f8b74d37006c.js","mappings":"2OAOsBA,E,wEADTC,EAAe,CAAC,EAKvBC,GAJgBF,EAIY,cAJJ,SAA6BG,GAEzD,OADAC,QAAQC,KAAK,aAAeL,EAAO,4EAC5BM,EAAAA,EAAAA,KAAA,MAASH,EAClB,GAEMI,EAAc,CAClBN,aAAAA,GAEIO,EAAYC,EAAAA,EACH,SAASC,EAAUC,GAG/B,IAFDC,EAAUD,EAAVC,WACGT,GAAKU,EAAAA,EAAAA,GAAAF,EAAAG,GAER,OAAOR,EAAAA,EAAAA,KAACE,GAASO,EAAAA,EAAAA,GAAA,GAAKR,EAAiBJ,EAAK,CAAES,WAAYA,EAAYI,QAAQ,eAG5EV,EAAAA,EAAAA,KAAA,MACE,GAAM,4BAA0B,8BAElCA,EAAAA,EAAAA,KAAA,mHACAA,EAAAA,EAAAA,KAAA,0KACAA,EAAAA,EAAAA,KAAA,MACE,GAAM,4BAA0B,6BAElCA,EAAAA,EAAAA,KAAA,sIACAA,EAAAA,EAAAA,KAAA,YAAKA,EAAAA,EAAAA,KAAA,QAAMW,WAAW,OAAK,kEAE3BX,EAAAA,EAAAA,KAACJ,EAAW,CAACgB,QAAQ,OAAOC,MAAM,OAAOH,QAAQ,iBACjDV,EAAAA,EAAAA,KAAA,UAAGA,EAAAA,EAAAA,KAAA,UAAQW,WAAW,KAAG,QAAkB,wKAC3CX,EAAAA,EAAAA,KAAA,MACE,GAAM,yBAAuB,0BAE/BA,EAAAA,EAAAA,KAAA,qGACAA,EAAAA,EAAAA,KAAA,uDAAiDA,EAAAA,EAAAA,KAAA,UAAQW,WAAW,KAAG,iBAA2B,+CAClGX,EAAAA,EAAAA,KAAA,YAAKA,EAAAA,EAAAA,KAAA,QAAMW,WAAW,MAClB,UAAa,mBAAiB,0uEAyElCX,EAAAA,EAAAA,KAAA,MACE,GAAM,YAAU,aAElBA,EAAAA,EAAAA,KAAA,oHACAA,EAAAA,EAAAA,KAAA,MACE,GAAM,+BAA6B,gCAErCA,EAAAA,EAAAA,KAAA,yMACAA,EAAAA,EAAAA,KAAA,+CAAyCA,EAAAA,EAAAA,KAAA,UAAQW,WAAW,KAAG,iBAA2B,iCAC1FX,EAAAA,EAAAA,KAAA,YAAKA,EAAAA,EAAAA,KAAA,QAAMW,WAAW,MAClB,UAAa,mBAAiB,uYAgBlCX,EAAAA,EAAAA,KAAA,MACE,GAAM,2BAAyB,4BAEjCA,EAAAA,EAAAA,KAAA,iNACAA,EAAAA,EAAAA,KAAA,4OACAA,EAAAA,EAAAA,KAAA,+CAAyCA,EAAAA,EAAAA,KAAA,UAAQW,WAAW,KAAG,iBAA2B,iCAC1FX,EAAAA,EAAAA,KAAA,YAAKA,EAAAA,EAAAA,KAAA,QAAMW,WAAW,MAClB,UAAa,mBAAiB,gzBA0BlCX,EAAAA,EAAAA,KAAA,oJAGJ,CAEAI,EAAWU,gBAAiB,C","sources":["webpack://dev-site-documentation-template/./src/pages/guides/remote-control.md"],"sourcesContent":["import * as React from 'react'\n  /* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsxRuntime classic */\n/* @jsx mdx */\nimport DefaultLayout from \"/home/runner/work/painter-python-api/painter-python-api/node_modules/@adobe/gatsby-theme-aio/src/components/MDXFilter/index.js\";\nexport const _frontmatter = {};\nconst makeShortcode = name => function MDXDefaultShortcode(props) {\n  console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n  return <div {...props} />;\n};\nconst InlineAlert = makeShortcode(\"InlineAlert\");\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = DefaultLayout;\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n\n    <h1 {...{\n      \"id\": \"remote-control--headless\"\n    }}>{`Remote control / headless`}</h1>\n    <p>{`This page describes how to control the application remotely to execute Javascript or Python commands.`}</p>\n    <p>{`This requires a specific command line argument, then a simple Python script can execute any commands available from the existing Javascript and Python APIs.`}</p>\n    <h2 {...{\n      \"id\": \"starting-the-application\"\n    }}>{`Starting the application`}</h2>\n    <p>{`In order to control remotely the application, Substance 3D Painter needs to be launched with the following command line:`}</p>\n    <pre><code parentName=\"pre\" {...{}}>{`\"Adobe Substance 3D painter.exe\" --enable-remote-scripting\n`}</code></pre>\n    <InlineAlert variant=\"info\" slots=\"text\" mdxType=\"InlineAlert\" />\n    <p><strong parentName=\"p\">{`Note`}</strong>{`: Make sure the application is up and running with this command before running any scripts. Scripts may fail if the application is still starting up/not ready yet.`}</p>\n    <h2 {...{\n      \"id\": \"remote-control-script\"\n    }}>{`Remote control script`}</h2>\n    <p>{`The following Python script can serve as a library to communicate with the application.`}</p>\n    <p>{`Save the following script in a file named `}<strong parentName=\"p\">{`lib_remote.py`}</strong>{` to make the examples below work properly.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-python\"\n      }}>{`import sys\nimport json\nimport base64\nimport subprocess\n\nif sys.version_info >= (3, 0):\n    import http.client as http\nelse:\n    import httplib as http\n\nclass PainterError(Exception):\n    def __init__(self, message):\n        super(PainterError, self).__init__(message)\n\nclass ExecuteScriptError(PainterError):\n    def __init__(self, data):\n        super(PainterError, self).__init__('An error occured when executing script: {0}'.format(data))\n\nclass RemotePainter() :\n    def __init__(self, port=60041, host='localhost'):\n        self._host = host\n        self._port = port\n\n        # Json server connection\n        self._PAINTER_ROUTE = '/run.json'\n        self._HEADERS = {\n            'Content-type': 'application/json',\n            'Accept': 'application/json'\n        }\n\n    # Execute a HTTP POST request to the Substance Painter server and send/receive JSON data\n    def _jsonPostRequest( self, route, body, type ) :\n        connection = http.HTTPConnection(self._host, self._port, timeout=3600)\n        connection.request('POST', route, body, self._HEADERS)\n        response = connection.getresponse()\n\n        data = response.read()\n        connection.close()\n\n        if type == \"js\" :\n            data = json.loads( data.decode('utf-8') )\n\n        if 'error' in data:\n            OutJson = json.loads( body.decode() )\n            print( base64.b64decode(OutJson[\"js\"]) )\n            raise ExecuteScriptError(data['error'])\n        else :\n        # Python can return nothing, so decoding can fail\n        try:\n            data = data.decode('utf-8').rstrip()\n        except:\n            pass\n\n        return data\n\n    def checkConnection(self):\n        connection = http.HTTPConnection(self._host, self._port)\n        connection.connect()\n\n    # Execute a command\n    def execScript( self, script, type ) :\n        Command = base64.b64encode( script.encode('utf-8') )\n\n        if type == \"js\" :\n            Command = '{{\"js\":\"{0}\"}}'.format( Command.decode('utf-8') )\n        else :\n            Command = '{{\"python\":\"{0}\"}}'.format( Command.decode('utf-8') )\n\n        Command = Command.encode( \"utf-8\" )\n\n        return self._jsonPostRequest( self._PAINTER_ROUTE, Command, type )\n`}</code></pre>\n    <h2 {...{\n      \"id\": \"examples\"\n    }}>{`Examples`}</h2>\n    <p>{`Below are two simple examples that shows how to run commands in both API supported by the application:`}</p>\n    <h3 {...{\n      \"id\": \"running-javascript-commands\"\n    }}>{`Running Javascript commands`}</h3>\n    <p>{`Most Javascript function in the API return String or Json data which make them easy to manipulate within the Python script. There shouldn't be any major problems to send and receive data.`}</p>\n    <p>{`Create a python script file named `}<strong parentName=\"p\">{`example_js.py`}</strong>{` and add the following code:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-python\"\n      }}>{`import lib_remote\n\nRemote = lib_remote.RemotePainter()\nRemote.checkConnection()\n\n# Print the API version\nVersion = Remote.execScript( \"alg.version.painter\", \"js\" )\nprint( Version )\n\n# Get a list of all the files in the default shelf/library:\nFiles = Remote.execScript( 'alg.resources.findResources(\"starter_assets\", \"*\")', \"js\" )\n\nfor File in Files :\n    print( File )\n`}</code></pre>\n    <h3 {...{\n      \"id\": \"running-python-commands\"\n    }}>{`Running Python commands`}</h3>\n    <p>{`Most Python functions may return objects which cannot be passed into the remote script, this means that in order receive data they need to be explicitly converted to strings or Json dictionaries.`}</p>\n    <p>{`To make things easier, it is possible to create custom python script that is loaded during the startup of the application and call functions that handle this kind of conversion without having to rely on inline conversions.`}</p>\n    <p>{`Create a python script file named `}<strong parentName=\"p\">{`example_py.py`}</strong>{` and add the following code:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-python\"\n      }}>{`import lib_remote\n\nRemote = lib_remote.RemotePainter()\nRemote.checkConnection()\n\n# import the substance_painter module to make\n# its API available to us\nRemote.execScript( \"import substance_painter\", \"python\" )\n\n# Print the API version\nVersion = Remote.execScript( \"substance_painter.__version__\", \"python\" )\nprint( Version )\n\n# Get a list of all the files in the default shelf/library\n# Because the search function return objects, we have to convert\n# the information into a string within the same command (inline)\nCommand = 'substance_painter.resource.search( \"p:starter_assets/\" )'\nCommand = '\"|||\".join( [ x.identifier().url() for x in {0}] )'.format( Command )\n\nFiles = Remote.execScript( Command, \"python\" )\nFiles = Files.split( \"|||\" )\n\nfor File in Files :\n    print( File )\n`}</code></pre>\n    <p>{`If the application is running with the command line, then running this script will make it execute commands and retrieve their results.`}</p>\n\n    </MDXLayout>;\n}\n;\nMDXContent.isMDXComponent = true;\n      "],"names":["name","_frontmatter","InlineAlert","props","console","warn","mdx","layoutProps","MDXLayout","DefaultLayout","MDXContent","_ref","components","_objectWithoutPropertiesLoose","_excluded","_extends","mdxType","parentName","variant","slots","isMDXComponent"],"sourceRoot":""}